{% extends "base.html" %}

{% block title %}Aktien Chart Anzeige{% endblock %}

{% block content %}
<div class="content-container">
    <h1>Aktien Chart</h1>

    <form method="POST" action="{{ url_for('test_graph_page') }}" class="chart-options-form" style="margin-bottom: 30px; display: flex; flex-direction: column; align-items: center; gap:15px;">
        {# This page seems to be a test page, redirecting its form to test_graph_page for specific ticker testing #}
        {# If it's meant to be a generic chart page, the action should be dynamic or point to itself #}
        {# For now, assuming it's for testing and pointing to test_graph_page with a default or specific ticker. #}
        {# To make it work as a standalone general graph page, you'd likely change the action and handle ticker input. #}

        <div class="form-group" style="width:100%; max-width:400px;">
            <label for="ticker">Aktien-Ticker (für Testseite):</label>
            <input type="text" id="ticker" name="ticker" value="{{ current_ticker if current_ticker else 'AAPL' }}" required placeholder="z.B. AAPL, MSFT" class="form-control">
        </div>
        {# Add period/quality selectors if this page is to be self-contained for chart options #}
        {# Example:
        <div class="form-group" style="width:100%; max-width:400px;">
            <label for="period">Zeitraum:</label>
            <select name="period" id="period" class="form-control">
                <option value="1y">1 Jahr</option>
                <option value="6mo">6 Monate</option>
            </select>
        </div>
        #}
        <button type="submit" class="form-button">Test-Chart anzeigen</button>
    </form>

    {% if error %}
        <div class="error-box">{{ error }}</div>
    {% endif %}

    {% if company_name and current_ticker %}
        <h2 style="text-align:center; font-size:1.3em; margin-bottom:20px;">{{ company_name }} ({{ current_ticker }})</h2>
    {% endif %}

    <div class="chart-container">
        {% if chart_html %}
            {{ chart_html | safe }}
        {% elif not error and not current_ticker %}
            <p style="text-align:center;">Bitte gib einen Aktien-Ticker ein und klicke "Test-Chart anzeigen".</p>
        {% elif not error and current_ticker and not chart_html %}
            <p style="text-align:center;">Chartdaten konnten nicht geladen werden für {{ current_ticker }}.</p>
        {% endif %}
    </div>
     <div style="text-align:center; margin-top:20px;">
        <a href="{{ url_for('search_stock_page') }}" class="footer-link">Zurück zur Aktiensuche</a>
    </div>
</div>
{% endblock %}{% extends "base.html" %}

{% block title %}Aktien Chart Anzeige{% endblock %}

{% block content %}
<div class="content-container">
    <h1>Aktien Chart</h1>

    <form method="POST" action="{{ url_for('test_graph_page') }}" class="chart-options-form" style="margin-bottom: 30px; display: flex; flex-direction: column; align-items: center; gap:15px;">
        {# This page seems to be a test page, redirecting its form to test_graph_page for specific ticker testing #}
        {# If it's meant to be a generic chart page, the action should be dynamic or point to itself #}
        {# For now, assuming it's for testing and pointing to test_graph_page with a default or specific ticker. #}
        {# To make it work as a standalone general graph page, you'd likely change the action and handle ticker input. #}

        <div class="form-group" style="width:100%; max-width:400px;">
            <label for="ticker">Aktien-Ticker (für Testseite):</label>
            <input type="text" id="ticker" name="ticker" value="{{ current_ticker if current_ticker else 'AAPL' }}" required placeholder="z.B. AAPL, MSFT" class="form-control">
        </div>
        {# Add period/quality selectors if this page is to be self-contained for chart options #}
        {# Example:
        <div class="form-group" style="width:100%; max-width:400px;">
            <label for="period">Zeitraum:</label>
            <select name="period" id="period" class="form-control">
                <option value="1y">1 Jahr</option>
                <option value="6mo">6 Monate</option>
            </select>
        </div>
        #}
        <button type="submit" class="form-button">Test-Chart anzeigen</button>
    </form>

    {% if error %}
        <div class="error-box">{{ error }}</div>
    {% endif %}

    {% if company_name and current_ticker %}
        <h2 style="text-align:center; font-size:1.3em; margin-bottom:20px;">{{ company_name }} ({{ current_ticker }})</h2>
    {% endif %}

    <div class="chart-container">
        {% if chart_html %}
            {{ chart_html | safe }}
        {% elif not error and not current_ticker %}
            <p style="text-align:center;">Bitte gib einen Aktien-Ticker ein und klicke "Test-Chart anzeigen".</p>
        {% elif not error and current_ticker and not chart_html %}
            <p style="text-align:center;">Chartdaten konnten nicht geladen werden für {{ current_ticker }}.</p>
        {% endif %}
    </div>
     <div style="text-align:center; margin-top:20px;">
        <a href="{{ url_for('search_stock_page') }}" class="footer-link">Zurück zur Aktiensuche</a>
    </div>
</div>
{% endblock %}