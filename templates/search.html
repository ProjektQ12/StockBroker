{% extends "base.html" %}

{% block title %}Aktiensuche{% endblock %}

{% block content %}
    <h2>Aktiensuche</h2>
    <form method="GET" action="/" class="search-form">
        <input type="text" name="query" placeholder="Firmenname oder Symbol eingeben..." value="{{ query or '' }}">
        <button type="submit">Suchen</button>
    </form>

    {% if error %}
        <p class="error">Fehler: {{ error }}</p>
    {% endif %}

    {% if results %}
        <h3>Suchergebnisse für "{{ query }}"</h3>
        {% if results|length > 0 %}
            <ul class="results-list">
                {% for result in results %}
                    <li>
                        <strong>Symbol:</strong> {{ result.symbol }}<br>
                        <strong>Name:</strong> {{ result.name }}<br>
                        <strong>Region:</strong> {{ result.region }}<br>
                        <strong>Währung:</strong> {{ result.currency }}<br>
                        <a href="{{ url_for('stock_detail_page', symbol=result.symbol) }}">Details anzeigen »</a>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>Keine Ergebnisse gefunden.</p>
        {% endif %}
    {% endif %}
{% endblock %}